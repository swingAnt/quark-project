import e from"@babel/runtime/helpers/defineProperty";var t={},n=[],r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function o(e){var t=e.parentNode;t&&t.removeChild(e)}function i(e){return"function"==typeof e}var l=n.slice;var s={_catchError:function(e,t,n,r){for(var o,i,l;t=t._parent;)if((o=t._component)&&!o._processingException)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(Object.assign(o,i.getDerivedStateFromError(e)),l=o._dirty),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o._dirty),l)return o._pendingError=o}catch(t){e=t}throw e}},c=0;function a(e,t,n){var r,o,i,s={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?l.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return u(e,s,r,o,null)}function u(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,_children:null,_parent:null,_depth:0,_dom:null,_nextDom:void 0,_component:null,_hydrating:null,constructor:void 0,_original:null==o?++c:o};return null==o&&null!=s.vnode&&s.vnode(i),i}function d(e){return e.children}function p(e){this.props=e,this._dirty=!1}function h(e,t){if(null==t)return e._parent?h(e._parent,e._parent._children.indexOf(e)+1):null;for(var n;t<e._children.length;t++)if(null!=(n=e._children[t])&&null!=n._dom)return n._dom;return"function"==typeof e.type?h(e):null}function f(e,r,o,i,l,s,c){var a,p,f,y,g,b,E,k=i&&i._children||n,D=k.length;for(o._children=[],a=0;a<r.length;a++)if(null!=(y=null==(y=r[a])||"boolean"==typeof y||"function"==typeof y?o._children[a]=null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?o._children[a]=u(null,y,null,null,y):Array.isArray(y)?o._children[a]=u(d,{children:y},null,null,null):y._depth>0?o._children[a]=u(y.type,y.props,y.key,y.ref?y.ref:null,y._original):o._children[a]=y)){if(y._parent=o,y._depth=o._depth+1,null===(f=k[a])||f&&y.key==f.key&&y.type===f.type)k[a]=void 0;else for(p=0;p<D;p++){if((f=k[p])&&y.key==f.key&&y.type===f.type){k[p]=void 0;break}f=null}x(e,y,f=f||t,l,s,c),g=y._dom,(p=y.ref)&&f.ref!=p&&(E||(E=[]),f.ref&&E.push(f.ref,null,y),E.push(p,y._component||g,y)),null!=g?(null==b&&(b=g),"function"==typeof y.type&&y._children===f._children?y._nextDom=c=_(y,c,e):c=m(e,y,f,k,g,c),"function"==typeof o.type&&(o._nextDom=c)):c&&f._dom==c&&c.parentNode!=e&&(c=h(f))}for(o._dom=b,a=D;a--;)null!=k[a]&&("function"==typeof o.type&&null!=k[a]._dom&&k[a]._dom==o._nextDom&&(o._nextDom=v(i).nextSibling),S(k[a],k[a]));if(E)for(a=0;a<E.length;a++)w(E[a],E[++a],E[++a])}function _(e,t,n){for(var r=e._children,o=0;r&&o<r.length;o++){var i=r[o];i&&(i._parent=e,t="function"==typeof i.type?_(i,t,n):m(n,i,i,r,i._dom,t))}return t}function m(e,t,n,r,o,i){var l;if(void 0!==t._nextDom)l=t._nextDom,t._nextDom=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),l=null;else{for(var s=i,c=0;(s=s.nextSibling)&&c<r.length;c+=1)if(s==o)break e;e.insertBefore(o,i),l=i}return i=void 0!==l?l:o.nextSibling}function v(e){if(null==e.type||"string"==typeof e.type)return e._dom;if(e._children)for(var t=e._children.length-1;t>=0;t--){var n=e._children[t];if(n){var r=v(n);if(r)return r}}return null}function y(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):null==n?e[t]="":"number"!=typeof n||r.test(t)?e[t]=n:e[t]=n+"px"}function g(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||y(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||y(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])if(i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e._listeners||(e._listeners={}),e._listeners[t+i]=n,n){if(!r){var l=i?E:b;e.addEventListener(t,l,i)}}else{var s=i?E:b;e.removeEventListener(t,s,i)}else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function b(e){return this._listeners[e.type+!1](s.event?s.event(e):e)}function E(e){return this._listeners[e.type+!0](s.event?s.event(e):e)}function x(e,n,r,i,c,a){var u,_=n.type;if(void 0!==n.constructor)return null;(u=s._diff)&&u(n);try{e:if("function"==typeof _){var m,v,y,b=n.props;if(r._component)y=(m=n._component=r._component)._processingException=m._pendingError;else{if("prototype"in _&&_.prototype.render&&"development"===process.env.NODE_ENV)throw new Error("Class component in render method is not supported.");n._component=m=new p(b),m.constructor=_,m.render=k,m.props=b,v=m._dirty=!0}if(m.props,m._vnode=n,v);else if(n._original===r._original){n._dom=r._dom,n._children=r._children,n._children.forEach((e=>{e&&(e._parent=n)}));break e}m.props=b,m._parentDom=e;var E=s._render,x=0;do{m._dirty=!1,E&&E(n),u=m.render(m.props)}while(m._dirty&&++x<25);var w=null!=u&&u.type===d&&null==u.key?u.props.children:u;f(e,Array.isArray(w)?w:[w],n,r,i,c,a),m.base=n._dom,y&&(m._pendingError=m._processingException=null)}else null==c&&n._original===r._original?(n._children=r._children,n._dom=r._dom):n._dom=function(e,n,r,i,s){var c=r.props,a=n.props,u=n.type,d=0;"svg"===u&&(i=!0);if(null!=s)for(;d<s.length;d++){var p=s[d];if(p&&"setAttribute"in p==!!u&&(u?p.localName===u:3===p.nodeType)){e=p,s[d]=null;break}}if(null==e){if(null===u)return document.createTextNode(a);e=i?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,a.is&&a),s=null}if(null===u)c!==a&&(e.data=a);else{s=s&&l.call(e.childNodes);var _=(c=r.props||t).dangerouslySetInnerHTML,m=a.dangerouslySetInnerHTML;if(null!=s)for(c={},d=0;d<e.attributes.length;d++)c[e.attributes[d].name]=e.attributes[d].value;if((m||_)&&(m&&(_&&m.__html==_.__html||m.__html===e.innerHTML)||(e.innerHTML=m&&m.__html||"")),function(e,t,n,r){var o;for(o in n)"children"===o||"key"===o||o in t||g(e,o,null,n[o],r);for(o in t)"children"!==o&&"key"!==o&&"value"!==o&&"checked"!==o&&n[o]!==t[o]&&g(e,o,t[o],n[o],r)}(e,a,c,i),m)n._children=[];else if(d=n.props.children,f(e,Array.isArray(d)?d:[d],n,r,i&&"foreignObject"!==u,s,s?s[0]:r._children&&h(r,0)),null!=s)for(d=s.length;d--;)null!=s[d]&&o(s[d]);"value"in a&&void 0!==(d=a.value)&&(d!==e.value||"progress"===u&&!d||"option"===u&&d!==c.value)&&g(e,"value",d,c.value,!1),"checked"in a&&void 0!==(d=a.checked)&&d!==e.checked&&g(e,"checked",d,c.checked,!1)}return e}(r._dom,n,r,i,c);(u=s.diffed)&&u(n)}catch(e){n._original=null,null!=c&&(n._dom=a,c[c.indexOf(a)]=null),s._catchError(e,n,r)}}function w(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){s._catchError(e,n)}}function S(e,t,n){var r;if(s.unmount&&s.unmount(e),(r=e.ref)&&(r.current&&r.current!==e._dom||w(r,null,t)),null!=(r=e._component)&&(r.base=r._parentDom=null,e._component=void 0),r=e._children)for(var i=0;i<r.length;i++)r[i]&&S(r[i],t,n||"function"!=typeof e.type);n||null==e._dom||o(e._dom),e._parent=e._dom=e._nextDom=void 0}function k(e){return this.constructor(e)}p.prototype.render=d;class D{constructor(){e(this,"map",new Map)}get(e,t){var n=this.map.get(e);if(n)return t?n.get(t):n}set(e,t,n){var r,o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),null===(r=o)||void 0===r||r.set(t,n)}forEach(e){this.map.forEach(((t,n)=>{t.forEach(((t,r)=>{e(t,n,r)}))}))}delete(e){this.map.delete(e)}deleteAll(){this.map.forEach(((e,t)=>{this.map.delete(t)}))}}class C{constructor(){e(this,"eventMap",new D),e(this,"bindListener",((e,t,n)=>{if(e&&t&&n){var r=this.eventMap.get(e,t);r||(r=new Set,this.eventMap.set(e,t,r)),r.has(n)||(r.add(n),e.addEventListener(t,n,!0))}})),e(this,"removeAllListener",(()=>{this.eventMap.forEach(((e,t,n)=>{e.forEach((e=>{t.removeEventListener(n,e,!0)}))})),this.eventMap.deleteAll()}))}}function P(){return{current:null}}var A=d;~location.href.indexOf("localhost")&&console.info("%cquarkc@".concat("1.0.39"),"color: white;background:#9f57f8;font-weight:bold;font-size:10px;padding:2px 6px;border-radius: 5px","Running in dev mode.");var L=e=>!(e||!1===e||0===e),M={observed:!0,type:String,converter:(e,t)=>{var n=e;switch(t){case Number:n=L(e)?e:Number(e);break;case Boolean:n=!([null,"false",!1,void 0].indexOf(e)>-1)}return n}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>t.constructor.createProperty(n,e)},O=()=>(e,t)=>e.constructor.createState(t),T=new D,U=new D;function B(e){var{tag:t,style:n=""}="string"==typeof e?{tag:e}:e;return e=>{class r extends e{static get observedAttributes(){var t=[],n=T.get(e);return n&&n.forEach(((e,n)=>{e.observed&&t.push(n)})),t}static isBooleanProperty(t){var n=!1,r=T.get(e);return r&&r.forEach(((e,r)=>{if(e.type===Boolean&&t===r)return n=!0})),n}constructor(){super();var e=this.attachShadow({mode:"open"});if(e)if("function"==typeof CSSStyleSheet&&e.adoptedStyleSheets){var t=new CSSStyleSheet;t.replaceSync(n),e.adoptedStyleSheets=[t]}else{var r=document.createElement("style");r.innerHTML=n,e.append(r)}var o=U.get(Object.getPrototypeOf(this.constructor));o&&o.forEach(((e,t)=>{Object.defineProperty(this,t,e(this[t]))}))}}customElements.get(t)||customElements.define(t,r)}}class H extends HTMLElement{constructor(){super(...arguments),e(this,"eventController",new C),e(this,"rootPatch",(e=>{this.shadowRoot&&function(e,n){s._root&&s._root(e,n);var r=n._children;e=n._children=a(d,null,[e]),x(n,e,r||t,void 0!==n.ownerSVGElement,r?null:n.firstChild?l.call(n.childNodes):null,r?r._dom:n.firstChild)}(e,this.shadowRoot)})),e(this,"$on",((e,t,n)=>this.eventController.bindListener(n||this,e,t)))}static getPropertyDescriptor(e,t){return n=>({get(){var r=this.getAttribute(e);return L(n)||!L(r)||t.type===Boolean&&""===r?(i(t.converter)&&(r=t.converter(r,t.type)),r):n},set(n){var r=n;i(t.converter)&&(r=t.converter(n,t.type)),r?"boolean"==typeof r?this.setAttribute(e,""):this.setAttribute(e,r):this.removeAttribute(e)},configurable:!0,enumerable:!0})}static getStateDescriptor(e){return t=>{var n=t;return{get:()=>n,set(t){var r=n;n=t,this._render(),i(this.componentDidUpdate)&&this.componentDidUpdate(e,r,t)},configurable:!0,enumerable:!0}}}static createProperty(e,t){var n=Object.assign({},M,t),r=t.attribute||e;T.set(this,r,n),U.set(this,e,this.getPropertyDescriptor(r,n))}static createState(e){U.set(this,e,this.getStateDescriptor(e))}_render(){var e=this.render();e&&this.rootPatch(e)}_updateProperty(){this.constructor.observedAttributes.forEach((e=>{this[e]=this[e]}))}_updateBooleanProperty(e){this.constructor.isBooleanProperty(e)&&(this[e]||(this[e]=this[e]))}$emit(e,t){return this.dispatchEvent(new CustomEvent(e,Object.assign({bubbles:!0},t)))}componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(e,t,n){return t!==n}componentDidUpdate(e,t,n){}render(){return""}connectedCallback(){this._updateProperty(),this._render(),i(this.componentDidMount)&&this.componentDidMount()}attributeChangedCallback(e,t,n){var r=this[e]||n;i(this.shouldComponentUpdate)&&!this.shouldComponentUpdate(e,t,r)||(this._render(),i(this.componentDidUpdate)&&this.componentDidUpdate(e,t,r),n!==t&&this._updateBooleanProperty(e))}disconnectedCallback(){i(this.componentWillUnmount)&&this.componentWillUnmount(),this.eventController.removeAllListener(),this.rootPatch(null)}}e(H,"h",a),e(H,"Fragment",A);export{A as Fragment,H as QuarkElement,P as createRef,B as customElement,N as property,O as state};
