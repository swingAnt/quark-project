!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Quarkc={})}(this,(function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={exports:{}},r={exports:{}},o={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(o);var i={exports:{}};!function(e){var t=o.exports.default;e.exports=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(i),function(e){var t=o.exports.default,n=i.exports;e.exports=function(e){var r=n(e,"string");return"symbol"===t(r)?r:String(r)},e.exports.__esModule=!0,e.exports.default=e.exports}(r),function(e){var t=r.exports;e.exports=function(e,n,r){return(n=t(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports}(n);var l=t(n.exports),s={},u=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e){return"function"==typeof e}var d=u.slice;var f={_catchError:function(e,t,n,r){for(var o,i,l;t=t._parent;)if((o=t._component)&&!o._processingException)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(Object.assign(o,i.getDerivedStateFromError(e)),l=o._dirty),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o._dirty),l)return o._pendingError=o}catch(t){e=t}throw e}},h=0;function _(e,t,n){var r,o,i,l={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?d.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===l[i]&&(l[i]=e.defaultProps[i]);return m(e,l,r,o,null)}function m(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,_children:null,_parent:null,_depth:0,_dom:null,_nextDom:void 0,_component:null,_hydrating:null,constructor:void 0,_original:null==o?++h:o};return null==o&&null!=f.vnode&&f.vnode(i),i}function v(e){return e.children}function y(e){this.props=e,this._dirty=!1}function g(e,t){if(null==t)return e._parent?g(e._parent,e._parent._children.indexOf(e)+1):null;for(var n;t<e._children.length;t++)if(null!=(n=e._children[t])&&null!=n._dom)return n._dom;return"function"==typeof e.type?g(e):null}function b(e,t,n,r,o,i,l){var a,c,p,d,f,h,_,y=r&&r._children||u,b=y.length;for(n._children=[],a=0;a<t.length;a++)if(null!=(d=null==(d=t[a])||"boolean"==typeof d||"function"==typeof d?n._children[a]=null:"string"==typeof d||"number"==typeof d||"bigint"==typeof d?n._children[a]=m(null,d,null,null,d):Array.isArray(d)?n._children[a]=m(v,{children:d},null,null,null):d._depth>0?n._children[a]=m(d.type,d.props,d.key,d.ref?d.ref:null,d._original):n._children[a]=d)){if(d._parent=n,d._depth=n._depth+1,null===(p=y[a])||p&&d.key==p.key&&d.type===p.type)y[a]=void 0;else for(c=0;c<b;c++){if((p=y[c])&&d.key==p.key&&d.type===p.type){y[c]=void 0;break}p=null}P(e,d,p=p||s,o,i,l),f=d._dom,(c=d.ref)&&p.ref!=c&&(_||(_=[]),p.ref&&_.push(p.ref,null,d),_.push(c,d._component||f,d)),null!=f?(null==h&&(h=f),"function"==typeof d.type&&d._children===p._children?d._nextDom=l=x(d,l,e):l=E(e,d,p,y,f,l),"function"==typeof n.type&&(n._nextDom=l)):l&&p._dom==l&&l.parentNode!=e&&(l=g(p))}for(n._dom=h,a=b;a--;)null!=y[a]&&("function"==typeof n.type&&null!=y[a]._dom&&y[a]._dom==n._nextDom&&(n._nextDom=S(r).nextSibling),A(y[a],y[a]));if(_)for(a=0;a<_.length;a++)C(_[a],_[++a],_[++a])}function x(e,t,n){for(var r=e._children,o=0;r&&o<r.length;o++){var i=r[o];i&&(i._parent=e,t="function"==typeof i.type?x(i,t,n):E(n,i,i,r,i._dom,t))}return t}function E(e,t,n,r,o,i){var l;if(void 0!==t._nextDom)l=t._nextDom,t._nextDom=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),l=null;else{for(var s=i,u=0;(s=s.nextSibling)&&u<r.length;u+=1)if(s==o)break e;e.insertBefore(o,i),l=i}return i=void 0!==l?l:o.nextSibling}function S(e){if(null==e.type||"string"==typeof e.type)return e._dom;if(e._children)for(var t=e._children.length-1;t>=0;t--){var n=e._children[t];if(n){var r=S(n);if(r)return r}}return null}function w(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):null==n?e[t]="":"number"!=typeof n||a.test(t)?e[t]=n:e[t]=n+"px"}function k(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||w(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||w(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])if(i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e._listeners||(e._listeners={}),e._listeners[t+i]=n,n){if(!r){var l=i?M:D;e.addEventListener(t,l,i)}}else{var s=i?M:D;e.removeEventListener(t,s,i)}else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function D(e){return this._listeners[e.type+!1](f.event?f.event(e):e)}function M(e){return this._listeners[e.type+!0](f.event?f.event(e):e)}function P(e,t,n,r,o,i){var l,u=t.type;if(void 0!==t.constructor)return null;(l=f._diff)&&l(t);try{e:if("function"==typeof u){var a,p,h,_=t.props;if(n._component)h=(a=t._component=n._component)._processingException=a._pendingError;else{if("prototype"in u&&u.prototype.render&&"development"===process.env.NODE_ENV)throw new Error("Class component in render method is not supported.");t._component=a=new y(_),a.constructor=u,a.render=L,a.props=_,p=a._dirty=!0}if(a.props,a._vnode=t,p);else if(t._original===n._original){t._dom=n._dom,t._children=n._children,t._children.forEach((e=>{e&&(e._parent=t)}));break e}a.props=_,a._parentDom=e;var m=f._render,x=0;do{a._dirty=!1,m&&m(t),l=a.render(a.props)}while(a._dirty&&++x<25);var E=null!=l&&l.type===v&&null==l.key?l.props.children:l;b(e,Array.isArray(E)?E:[E],t,n,r,o,i),a.base=t._dom,h&&(a._pendingError=a._processingException=null)}else null==o&&t._original===n._original?(t._children=n._children,t._dom=n._dom):t._dom=function(e,t,n,r,o){var i=n.props,l=t.props,u=t.type,a=0;"svg"===u&&(r=!0);if(null!=o)for(;a<o.length;a++){var p=o[a];if(p&&"setAttribute"in p==!!u&&(u?p.localName===u:3===p.nodeType)){e=p,o[a]=null;break}}if(null==e){if(null===u)return document.createTextNode(l);e=r?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,l.is&&l),o=null}if(null===u)i!==l&&(e.data=l);else{o=o&&d.call(e.childNodes);var f=(i=n.props||s).dangerouslySetInnerHTML,h=l.dangerouslySetInnerHTML;if(null!=o)for(i={},a=0;a<e.attributes.length;a++)i[e.attributes[a].name]=e.attributes[a].value;if((h||f)&&(h&&(f&&h.__html==f.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||"")),function(e,t,n,r){var o;for(o in n)"children"===o||"key"===o||o in t||k(e,o,null,n[o],r);for(o in t)"children"!==o&&"key"!==o&&"value"!==o&&"checked"!==o&&n[o]!==t[o]&&k(e,o,t[o],n[o],r)}(e,l,i,r),h)t._children=[];else if(a=t.props.children,b(e,Array.isArray(a)?a:[a],t,n,r&&"foreignObject"!==u,o,o?o[0]:n._children&&g(n,0)),null!=o)for(a=o.length;a--;)null!=o[a]&&c(o[a]);"value"in l&&void 0!==(a=l.value)&&(a!==e.value||"progress"===u&&!a||"option"===u&&a!==i.value)&&k(e,"value",a,i.value,!1),"checked"in l&&void 0!==(a=l.checked)&&a!==e.checked&&k(e,"checked",a,i.checked,!1)}return e}(n._dom,t,n,r,o);(l=f.diffed)&&l(t)}catch(e){t._original=null,null!=o&&(t._dom=i,o[o.indexOf(i)]=null),f._catchError(e,t,n)}}function C(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){f._catchError(e,n)}}function A(e,t,n){var r;if(f.unmount&&f.unmount(e),(r=e.ref)&&(r.current&&r.current!==e._dom||C(r,null,t)),null!=(r=e._component)&&(r.base=r._parentDom=null,e._component=void 0),r=e._children)for(var o=0;o<r.length;o++)r[o]&&A(r[o],t,n||"function"!=typeof e.type);n||null==e._dom||c(e._dom),e._parent=e._dom=e._nextDom=void 0}function L(e){return this.constructor(e)}y.prototype.render=v;class O{constructor(){l(this,"map",new Map)}get(e,t){var n=this.map.get(e);if(n)return t?n.get(t):n}set(e,t,n){var r,o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),null===(r=o)||void 0===r||r.set(t,n)}forEach(e){this.map.forEach(((t,n)=>{t.forEach(((t,r)=>{e(t,n,r)}))}))}delete(e){this.map.delete(e)}deleteAll(){this.map.forEach(((e,t)=>{this.map.delete(t)}))}}class N{constructor(){l(this,"eventMap",new O),l(this,"bindListener",((e,t,n)=>{if(e&&t&&n){var r=this.eventMap.get(e,t);r||(r=new Set,this.eventMap.set(e,t,r)),r.has(n)||(r.add(n),e.addEventListener(t,n,!0))}})),l(this,"removeAllListener",(()=>{this.eventMap.forEach(((e,t,n)=>{e.forEach((e=>{t.removeEventListener(n,e,!0)}))})),this.eventMap.deleteAll()}))}}var T=v;~location.href.indexOf("localhost")&&console.info("%cquarkc@".concat("1.0.39"),"color: white;background:#9f57f8;font-weight:bold;font-size:10px;padding:2px 6px;border-radius: 5px","Running in dev mode.");var j=e=>!(e||!1===e||0===e),U={observed:!0,type:String,converter:(e,t)=>{var n=e;switch(t){case Number:n=j(e)?e:Number(e);break;case Boolean:n=!([null,"false",!1,void 0].indexOf(e)>-1)}return n}},B=new O,H=new O;class $ extends HTMLElement{constructor(){super(...arguments),l(this,"eventController",new N),l(this,"rootPatch",(e=>{this.shadowRoot&&function(e,t){f._root&&f._root(e,t);var n=t._children;e=t._children=_(v,null,[e]),P(t,e,n||s,void 0!==t.ownerSVGElement,n?null:t.firstChild?d.call(t.childNodes):null,n?n._dom:t.firstChild)}(e,this.shadowRoot)})),l(this,"$on",((e,t,n)=>this.eventController.bindListener(n||this,e,t)))}static getPropertyDescriptor(e,t){return n=>({get(){var r=this.getAttribute(e);return j(n)||!j(r)||t.type===Boolean&&""===r?(p(t.converter)&&(r=t.converter(r,t.type)),r):n},set(n){var r=n;p(t.converter)&&(r=t.converter(n,t.type)),r?"boolean"==typeof r?this.setAttribute(e,""):this.setAttribute(e,r):this.removeAttribute(e)},configurable:!0,enumerable:!0})}static getStateDescriptor(e){return t=>{var n=t;return{get:()=>n,set(t){var r=n;n=t,this._render(),p(this.componentDidUpdate)&&this.componentDidUpdate(e,r,t)},configurable:!0,enumerable:!0}}}static createProperty(e,t){var n=Object.assign({},U,t),r=t.attribute||e;B.set(this,r,n),H.set(this,e,this.getPropertyDescriptor(r,n))}static createState(e){H.set(this,e,this.getStateDescriptor(e))}_render(){var e=this.render();e&&this.rootPatch(e)}_updateProperty(){this.constructor.observedAttributes.forEach((e=>{this[e]=this[e]}))}_updateBooleanProperty(e){this.constructor.isBooleanProperty(e)&&(this[e]||(this[e]=this[e]))}$emit(e,t){return this.dispatchEvent(new CustomEvent(e,Object.assign({bubbles:!0},t)))}componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(e,t,n){return t!==n}componentDidUpdate(e,t,n){}render(){return""}connectedCallback(){this._updateProperty(),this._render(),p(this.componentDidMount)&&this.componentDidMount()}attributeChangedCallback(e,t,n){var r=this[e]||n;p(this.shouldComponentUpdate)&&!this.shouldComponentUpdate(e,t,r)||(this._render(),p(this.componentDidUpdate)&&this.componentDidUpdate(e,t,r),n!==t&&this._updateBooleanProperty(e))}disconnectedCallback(){p(this.componentWillUnmount)&&this.componentWillUnmount(),this.eventController.removeAllListener(),this.rootPatch(null)}}l($,"h",_),l($,"Fragment",T),e.Fragment=T,e.QuarkElement=$,e.createRef=function(){return{current:null}},e.customElement=function(e){var{tag:t,style:n=""}="string"==typeof e?{tag:e}:e;return e=>{class r extends e{static get observedAttributes(){var t=[],n=B.get(e);return n&&n.forEach(((e,n)=>{e.observed&&t.push(n)})),t}static isBooleanProperty(t){var n=!1,r=B.get(e);return r&&r.forEach(((e,r)=>{if(e.type===Boolean&&t===r)return n=!0})),n}constructor(){super();var e=this.attachShadow({mode:"open"});if(e)if("function"==typeof CSSStyleSheet&&e.adoptedStyleSheets){var t=new CSSStyleSheet;t.replaceSync(n),e.adoptedStyleSheets=[t]}else{var r=document.createElement("style");r.innerHTML=n,e.append(r)}var o=H.get(Object.getPrototypeOf(this.constructor));o&&o.forEach(((e,t)=>{Object.defineProperty(this,t,e(this[t]))}))}}customElements.get(t)||customElements.define(t,r)}},e.property=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>t.constructor.createProperty(n,e)},e.state=()=>(e,t)=>e.constructor.createState(t),Object.defineProperty(e,"__esModule",{value:!0})}));
